---
title: 代码重构原则
date: 2020-3-24 15:04:20
tags:
	
categories: 乱炖
---

## 综述

+ 是不过三，三则重构
+ 重构应该随时随地的进行
+ 不回头重构自己的代码，就不知道你自己的代码有多臭
+ 重构是理解代码的最好方式
+ 如果尿布臭了就把他换掉
+ 将查询函数与修改函数分离  

## 命名

+ 就算函数名称比提炼出来的代码还要长也无所谓
+ 命名 以他__做什么__来命名，而不是他__怎么做__来命名

## 重构的方法

### 分解临时变量

你的程序的某个临时变量呗赋值超过一次，它既不是循环变量，又不是被用于手机计算的结果。就需要拆成两个不同的变量。

一个临时变量最好只做一件事情

### 移除对参数的赋值

在一个方法中，应当禁止，对该方法的参数进行赋值

降低代码的清晰度，在下次调用参数的时候，该参数的意义已经修改

### 以函数对象取代函数

当有一个大型函数的时候，其中对局部变量的使用使你无法采用（扩展方法）。

将这个行乎放进一个对象中，如此一来局部变量就变成了对象内的字段，然后可以在同一个对象中将这个大型函数分解为多个小型函数。

创建一个新的实体类，来封装参数，同时重写构造方法，将参数传递过去。也可以再将需要处理的方法，移到实体类中。

### 搬移函数

### 搬移字段

### 提炼类

一个类做了，两个类的事情

### 将类内联化

某个类没有做太多的事情，将这个类的所有特性移到另一个类中，然后移除原类。

### 移除中间人

某个类做了过多的简单委托动作。

让用户直接调用受委托的类。

### 引入外加函数

你需要提供一个服务的类增加一个函数，但是你又无法修改这个类。

再客户类中建立一个函数，并以第一参数的形式传入一个服务类实例。

### 引入本地类

与上面的__引入外加类函数__问题相似，但是当需要扩展的方法多的时候，用引入本地类

创建一个新的类，来继承原来的类，添加新的方法   P164

### 自封装字段

直接访问一个字段，但与字段之间的耦合关系逐渐变得笨拙

为这个字段建立取值/设值函数，并且只以这些函数来访问字段

### 将值对象改为引用对象

### 以字面常量取代魔法数

